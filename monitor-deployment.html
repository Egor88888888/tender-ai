<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEnder AI - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            margin: 0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .status-section {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }
        
        .status-section h2 {
            margin-bottom: 15px;
            color: #fbbf24;
        }
        
        .progress-bar {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            height: 30px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #34d399);
            height: 100%;
            border-radius: 10px;
            transition: width 2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .status-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 auto 10px;
            transition: all 0.3s ease;
        }
        
        .status-pending { background: #fbbf24; animation: pulse 2s infinite; }
        .status-running { background: #3b82f6; animation: pulse 1s infinite; }
        .status-success { background: #10b981; }
        .status-error { background: #ef4444; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .logs {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .links {
            text-align: center;
            margin-top: 30px;
        }
        
        .links a {
            color: #60a5fa;
            text-decoration: none;
            margin: 0 15px;
            font-weight: 600;
        }
        
        .links a:hover {
            color: #93c5fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ TEnder AI</h1>
        
        <div class="status-section">
            <h2>üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="overall-progress" style="width: 0%">0%</div>
            </div>
            <p id="overall-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</p>
        </div>
        
        <div class="status-section">
            <h2>‚öôÔ∏è –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h2>
            <div class="status-grid">
                <div class="status-card">
                    <div class="status-indicator status-pending" id="github-status"></div>
                    <h3>GitHub Actions</h3>
                    <p id="github-text">–ü—Ä–æ–≤–µ—Ä–∫–∞...</p>
                </div>
                
                <div class="status-card">
                    <div class="status-indicator status-pending" id="infra-status"></div>
                    <h3>Azure Infrastructure</h3>
                    <p id="infra-text">–û–∂–∏–¥–∞–Ω–∏–µ...</p>
                </div>
                
                <div class="status-card">
                    <div class="status-indicator status-pending" id="database-status"></div>
                    <h3>PostgreSQL Database</h3>
                    <p id="database-text">–û–∂–∏–¥–∞–Ω–∏–µ...</p>
                </div>
                
                <div class="status-card">
                    <div class="status-indicator status-pending" id="ocr-status"></div>
                    <h3>OCR Services</h3>
                    <p id="ocr-text">–û–∂–∏–¥–∞–Ω–∏–µ...</p>
                </div>
                
                <div class="status-card">
                    <div class="status-indicator status-pending" id="api-status"></div>
                    <h3>API Container</h3>
                    <p id="api-text">–û–∂–∏–¥–∞–Ω–∏–µ...</p>
                </div>
                
                <div class="status-card">
                    <div class="status-indicator status-pending" id="testing-status"></div>
                    <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <p id="testing-text">–û–∂–∏–¥–∞–Ω–∏–µ...</p>
                </div>
            </div>
        </div>
        
        <div class="status-section">
            <h2>üìã –õ–æ–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è</h2>
            <div class="logs" id="deployment-logs">
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ...
–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: ${new Date().toLocaleString()}

üîÑ –≠—Ç–∞–ø—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä-–∫–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω
2. üîÑ GitHub Actions –∑–∞–ø—É—â–µ–Ω
3. ‚è≥ Azure Infrastructure —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
4. ‚è≥ PostgreSQL Database —Å–æ–∑–¥–∞–Ω–∏–µ
5. ‚è≥ Cognitive Services –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
6. ‚è≥ Container App –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
7. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –Ω–∏–∂–µ...
            </div>
            
            <div style="margin-top: 15px;">
                <button class="btn" onclick="refreshStatus()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
                <button class="btn" onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
                <button class="btn" onclick="window.open('https://github.com/Egor88888888/tender-ai/actions', '_blank')">üîó GitHub Actions</button>
            </div>
        </div>
        
        <div class="links">
            <a href="frontend/index-simple.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="frontend/simple-test.html">üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç</a>
            <a href="frontend/test-full-features.html">üß™ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
            <a href="https://tender-api.bravesmoke-248b9fb5.westeurope.azurecontainerapps.io/docs">üìö API Docs</a>
        </div>
    </div>

    <script>
        const API_BASE = 'https://tender-api.bravesmoke-248b9fb5.westeurope.azurecontainerapps.io';
        let checkCount = 0;
        let startTime = new Date();
        
        function logMessage(message) {
            const logs = document.getElementById('deployment-logs');
            const timestamp = new Date().toLocaleTimeString();
            logs.textContent += `\n[${timestamp}] ${message}`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        function updateProgress(percentage, status) {
            document.getElementById('overall-progress').style.width = percentage + '%';
            document.getElementById('overall-progress').textContent = percentage + '%';
            document.getElementById('overall-status').textContent = status;
        }
        
        function updateComponentStatus(component, status, text) {
            const indicator = document.getElementById(component + '-status');
            const textEl = document.getElementById(component + '-text');
            
            indicator.className = `status-indicator status-${status}`;
            textEl.textContent = text;
        }
        
        async function checkGitHubActions() {
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ GitHub Actions (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–µ–Ω API token)
                updateComponentStatus('github', 'running', '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');
                logMessage('üîÑ GitHub Actions workflow –∑–∞–ø—É—â–µ–Ω');
                return 'running';
            } catch (error) {
                updateComponentStatus('github', 'error', '–û—à–∏–±–∫–∞');
                return 'error';
            }
        }
        
        async function checkAPIStatus() {
            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
                if (data.features.database) {
                    updateComponentStatus('database', 'success', '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞');
                    updateComponentStatus('infra', 'success', '–†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞');
                } else {
                    updateComponentStatus('database', 'pending', '–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ...');
                }
                
                if (data.features.computer_vision) {
                    updateComponentStatus('ocr', 'success', '–ù–∞—Å—Ç—Ä–æ–µ–Ω');
                } else {
                    updateComponentStatus('ocr', 'pending', '–ù–∞—Å—Ç—Ä–æ–π–∫–∞...');
                }
                
                updateComponentStatus('api', 'success', '–†–∞–±–æ—Ç–∞–µ—Ç');
                
                // –ü–æ–¥—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                let completedServices = 0;
                let totalServices = 5;
                
                if (data.features.blob_storage) completedServices++;
                if (data.features.database) completedServices++;
                if (data.features.computer_vision) completedServices++;
                if (data.features.gemini_ai) completedServices++;
                completedServices++; // API –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
                
                const progressPercentage = Math.round((completedServices / totalServices) * 100);
                
                if (progressPercentage === 100) {
                    updateProgress(100, 'üéâ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!');
                    updateComponentStatus('testing', 'success', '–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é');
                    logMessage('‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ!');
                    logMessage('üéØ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ: frontend/test-full-features.html');
                } else {
                    updateProgress(progressPercentage, `–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ... (${completedServices}/${totalServices} —Å–µ—Ä–≤–∏—Å–æ–≤)`);
                    logMessage(`üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progressPercentage}% (${completedServices}/${totalServices} —Å–µ—Ä–≤–∏—Å–æ–≤ –≥–æ—Ç–æ–≤–æ)`);
                }
                
                return data;
                
            } catch (error) {
                updateComponentStatus('api', 'error', '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                logMessage(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ API: ${error.message}`);
                return null;
            }
        }
        
        async function refreshStatus() {
            checkCount++;
            logMessage(`üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ #${checkCount}...`);
            
            await checkGitHubActions();
            const apiData = await checkAPIStatus();
            
            if (apiData && apiData.features.database && apiData.features.computer_vision) {
                logMessage('üéâ –ü–û–õ–ù–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!');
                logMessage('‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                clearInterval(window.statusInterval);
            }
        }
        
        function clearLogs() {
            document.getElementById('deployment-logs').textContent = '–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã...\n';
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        refreshStatus(); // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        window.statusInterval = setInterval(refreshStatus, 30000);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        setInterval(() => {
            const elapsed = Math.floor((new Date() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.title = `TEnder AI - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (${minutes}:${seconds.toString().padStart(2, '0')})`;
        }, 1000);
        
        logMessage('üöÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∑–∞–ø—É—â–µ–Ω');
        logMessage('‚è∞ –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: 10-15 –º–∏–Ω—É—Ç');
    </script>
</body>
</html> 
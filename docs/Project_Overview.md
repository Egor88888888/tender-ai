# Project Overview – «ИИ-Ассистент по Тендерным Закупкам»

## 1. Миссия и Цели

- Сократить время специалистов на подготовку тендерных заявок.
- Минимизировать риски брака документов и пропуска требований.
- Повысить конверсию побед с помощью аналитики и самообучающегося ядра.

## 2. Заинтересованные Стороны и Роли

| Роль           | Описание                                                    | Ключевые права                            |
| -------------- | ----------------------------------------------------------- | ----------------------------------------- |
| Специалист     | Готовит тендеры, загружает документы, запускает анализ      | CRUD тендеров, загрузка файлов            |
| Администратор  | Управление пользователями, настройками системных параметров | Управление ролями, лимитами, интеграциями |
| Руководитель   | Отчётность, KPI, принятие решений                           | Просмотр аналитики, экспорт отчётов       |
| _(расширяемо)_ | Возможность добавлять новые роли через UI                   | Настраиваемые права                       |

## 3. Ключевые Use-Case'ы (MVP)

1. Загрузка и структурирование корпоративных документов (База знаний).
2. Семантический поиск по Базе знаний.
3. Просмотр карточек проектов, лицензий, шаблонов.
4. Ручное заполнение шаблона .docx из Базы знаний.
5. Управление пользователями и ролями.

## 4. Архитектура (High-Level)

```
Пользователь (браузер)
      │
┌──────▼──────┐      ┌──────────────┐
│   Frontend  │──▶──▶│  FastAPI     │──┐
│ React + TS  │◀──┘  │  (API)       │  │
└─────────────┘      └──────────────┘  │
        ▲              ▲   ▲           │
        │              │   │ Celery    │
        │              │   └────────┐  │
        │              │            │  │
        │    MinIO     │   Redis    │  │
        │ (FileStore)  │ (Broker)   │  │
        │              │            ▼  ▼
        │              │         AI Core
        │              │   (OCR / NLP / ML)
        │              │            │
        │              └────────────┤
        │ PostgreSQL+pgvector       │
        └───────────────────────────┘
```

## 5. Модули и Их Ответственности

### 5.1 Frontend (React + MUI)

- Авторизация и RBAC-меню.
- Экраны: Дашборд, Документы, Поиск, Настройки.

### 5.2 API-Сервер (FastAPI)

- JWT-аутентификация.
- REST/GraphQL эндпойнты для CRUD операций.
- Валидация данных (Pydantic).

### 5.3 Очереди (Celery + Redis)

- Фоновые задачи: OCR, NLP анализ, генерация отчётов.
- Ретрай-механизм и мониторинг.

### 5.4 AI Core (Python)

- OCR: Tesseract via pytesseract.
- NER: Natasha / spaCy (ru).
- Семантика: ruBERT / GPT через OpenAI/Azure.
- LLM: Gemini Pro via google-generativeai (summary, risk classification, текстовые черновики).

### 5.5 Knowledge Base

- PostgreSQL 16 + pgvector.
- MinIO для файлов.
- Индексы для полнотекстового и векторного поиска.

### 5.6 Интеграции

- ЭТП API / RPA (Playwright).
- КриптоПро CSP SDK.

## 6. Технологический Стек (конкретика)

| Слой      | Инструмент                                                           | Версия (минимум) |
| --------- | -------------------------------------------------------------------- | ---------------- |
| Frontend  | React 18, TypeScript 5, MUI 5                                        |                  |
| Backend   | FastAPI 0.115+, Uvicorn, Pydantic 2                                  |                  |
| Queue     | Celery 5, Redis 7                                                    |                  |
| DB        | PostgreSQL 16, pgvector 0.5                                          |                  |
| FileStore | MinIO (latest)                                                       |                  |
| AI        | Tesseract 5, natasha 1.5, transformers 4.41, google-generativeai 0.5 |                  |
| DevOps    | Docker, GitHub Actions, Azure Container Registry                     |                  |

## 7. MVP Scope (Этап 1 «Цифровой архив»)

- Таблицы: `company`, `license`, `project`, `document`.
- REST API: `/upload`, `/search`, `/documents/:id`.
- React-экраны: Login, Dashboard, Search, Docs.
- Минимальная RBAC.

## 8. Схема Данных (черновик)

```
company (id, name, inn, kpp, address)
license (id, company_id, number, type, issued_at, expires_at)
project (id, company_id, title, amount, description)
document (id, project_id, type, filename, vector_embedding)
```

## 9. Безопасность

- JWT + BCrypt.
- HTTPS (ACR ingress).
- Шифрование ключей ЭЦП (Azure Key Vault/built-in MinIO KMS).
- Хранение `GEMINI_API_KEY` в Azure Key Vault / локальном `.env`.

## 10. CI/CD и Окружения

| Stage | Хостинг                                            | Особенности                |
| ----- | -------------------------------------------------- | -------------------------- |
| Dev   | free GitHub Actions + free Azure Web App (starter) | Auto-deploy on push to dev |
| Test  | Azure B-series VM                                  | Nightly e2e + load tests   |
| Prod  | Azure App Service + Azure Postgres Flexible        | SLA 99.9 %                 |

## 11. Производительность / SLA

- OCR + NER ≤ 30 сек / 10-page PDF.
- Генерация пакета ≤ 60 сек.
- Горизонтальное масштабирование фронт/бекенд.

## 12. Дорожная Карта (12-24 мес.)

| Этап             | Месяцы | Цель                          |
| ---------------- | ------ | ----------------------------- |
| MVP «Архив»      | 1-3    | Хранилище + Поиск             |
| «Умный Аналитик» | 4-8    | Авто-разбор тендеров (Gemini) |
| «Компилятор»     | 9-14   | Автогенерация пакетов         |
| «Отправщик»      | 15-20  | Подписание + загрузка на ЭТП  |
| Оптимизация      | 21-24  | ML feedback loop              |

## 13. Риски и Митигация

| Риск             | Воздействие         | Митигация                                  |
| ---------------- | ------------------- | ------------------------------------------ |
| OCR accuracy     | Неправильные данные | Пост-коррекция UI, обучение моделей        |
| Изменение UI ЭТП | Падение RPA         | Мониторинг + модульная структура скриптов  |
| Key leak         | Финансовые потери   | Key Vault + RBAC + аудит                   |
| LLM quota limits | Отказ генерации     | Кеширование, мониторинг квот, fallback LLM |

---

_Документ подготовлен: {{date}}._

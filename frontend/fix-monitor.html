<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TEnder AI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .urgent-notice {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .problems-list {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .problem-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        
        .status-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 15px;
            animation: pulse 2s infinite;
        }
        
        .status-error { background: #ef4444; }
        .status-fixing { background: #f59e0b; }
        .status-success { background: #10b981; animation: none; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .fix-progress {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .progress-bar {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            height: 30px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #34d399);
            height: 100%;
            border-radius: 10px;
            transition: width 2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .fix-steps {
            margin: 20px 0;
        }
        
        .step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
        }
        
        .step-pending { background: rgba(251, 191, 36, 0.2); }
        .step-running { background: rgba(59, 130, 246, 0.2); }
        .step-completed { background: rgba(16, 185, 129, 0.2); }
        
        .step-icon {
            margin-right: 15px;
            font-size: 1.2rem;
        }
        
        .logs {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 250px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin: 20px 0;
        }
        
        .action-buttons {
            text-align: center;
            margin: 25px 0;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .success-notice {
            background: linear-gradient(135deg, #10b981, #34d399);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h1>
            <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Container App</p>
        </div>
        
        <div class="urgent-notice">
            <h2>‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:</h2>
            <div class="problems-list">
                <div class="problem-item">
                    <div class="status-indicator status-error" id="db-problem"></div>
                    <span>Database not configured - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞</span>
                </div>
                <div class="problem-item">
                    <div class="status-indicator status-error" id="ocr-problem"></div>
                    <span>Computer Vision not configured - OCR –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>
                </div>
                <div class="problem-item">
                    <div class="status-indicator status-error" id="ai-problem"></div>
                    <span>AI –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç [object Object]</span>
                </div>
                <div class="problem-item">
                    <div class="status-indicator status-error" id="storage-problem"></div>
                    <span>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Container App –Ω–µ–ø–æ–ª–Ω—ã–µ</span>
                </div>
            </div>
        </div>
        
        <div class="fix-progress">
            <h2>üîß –ü—Ä–æ–≥—Ä–µ—Å—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="fix-progress" style="width: 0%">0%</div>
            </div>
            
            <div class="fix-steps">
                <div class="step step-running" id="step1">
                    <span class="step-icon">üîç</span>
                    <span>–ü–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Azure —Ä–µ—Å—É—Ä—Å–æ–≤</span>
                </div>
                <div class="step step-pending" id="step2">
                    <span class="step-icon">üöÄ</span>
                    <span>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</span>
                </div>
                <div class="step step-pending" id="step3">
                    <span class="step-icon">üîß</span>
                    <span>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Container App —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏</span>
                </div>
                <div class="step step-pending" id="step4">
                    <span class="step-icon">üß™</span>
                    <span>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π</span>
                </div>
                <div class="step step-pending" id="step5">
                    <span class="step-icon">‚úÖ</span>
                    <span>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞</span>
                </div>
            </div>
        </div>
        
        <div class="fix-progress">
            <h2>üìã –õ–æ–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
            <div class="logs" id="fix-logs">
üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–ü–£–©–ï–ù–û
–í—Ä–µ–º—è: ${new Date().toLocaleString()}

‚úÖ GitHub Actions —Ç—Ä–∏–≥–≥–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
üîÑ Workflow "Fix Container App Configuration" –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-10 –º–∏–Ω—É—Ç

üìã –≠—Ç–∞–ø—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. üîç –ü–æ–∏—Å–∫ PostgreSQL —Å–µ—Ä–≤–µ—Ä–æ–≤
2. üß† –ü–æ–∏—Å–∫ Cognitive Services  
3. üíæ –ü—Ä–æ–≤–µ—Ä–∫–∞ Storage Account
4. üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
5. üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Container App
6. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º...
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn" onclick="refreshStatus()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
            <button class="btn" onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
            <a href="https://github.com/Egor88888888/tender-ai/actions" class="btn" target="_blank">üëÄ GitHub Actions</a>
            <a href="test-full-features.html" class="btn">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
        </div>
        
        <div class="success-notice" id="success-notice">
            <h2>üéâ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û!</h2>
            <p>–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!</p>
            <a href="test-full-features.html" class="btn">üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏</a>
        </div>
    </div>

    <script>
        const API_BASE = 'https://tender-api.bravesmoke-248b9fb5.westeurope.azurecontainerapps.io';
        let checkCount = 0;
        let startTime = new Date();
        let currentStep = 1;
        let fixedProblems = 0;
        
        function logMessage(message) {
            const logs = document.getElementById('fix-logs');
            const timestamp = new Date().toLocaleTimeString();
            logs.textContent += `\n[${timestamp}] ${message}`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        function updateProgress(percentage) {
            document.getElementById('fix-progress').style.width = percentage + '%';
            document.getElementById('fix-progress').textContent = percentage + '%';
        }
        
        function updateStep(stepNumber, status) {
            const step = document.getElementById(`step${stepNumber}`);
            step.className = `step step-${status}`;
            
            if (status === 'running') {
                currentStep = stepNumber;
            }
        }
        
        function updateProblemStatus(problemId, fixed) {
            const indicator = document.getElementById(problemId);
            if (fixed) {
                indicator.className = 'status-indicator status-success';
                fixedProblems++;
            } else {
                indicator.className = 'status-indicator status-fixing';
            }
        }
        
        async function checkAPIStatus() {
            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                
                let progress = 20; // Base progress for API being responsive
                
                // Check each service
                if (data.features.database) {
                    updateProblemStatus('db-problem', true);
                    progress += 25;
                    logMessage('‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
                }
                
                if (data.features.computer_vision) {
                    updateProblemStatus('ocr-problem', true);
                    progress += 25;
                    logMessage('‚úÖ Computer Vision –Ω–∞—Å—Ç—Ä–æ–µ–Ω!');
                }
                
                if (data.features.gemini_ai) {
                    updateProblemStatus('ai-problem', true);
                    progress += 15;
                    logMessage('‚úÖ Gemini AI —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
                }
                
                if (data.features.blob_storage) {
                    updateProblemStatus('storage-problem', true);
                    progress += 15;
                    logMessage('‚úÖ Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ!');
                }
                
                updateProgress(progress);
                
                // Update steps based on progress
                if (progress >= 20) updateStep(1, 'completed');
                if (progress >= 40) updateStep(2, 'completed');
                if (progress >= 60) updateStep(3, 'completed');
                if (progress >= 80) updateStep(4, 'completed');
                if (progress >= 100) {
                    updateStep(5, 'completed');
                    showSuccess();
                }
                
                return data;
                
            } catch (error) {
                logMessage(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ API: ${error.message}`);
                return null;
            }
        }
        
        function showSuccess() {
            document.getElementById('success-notice').style.display = 'block';
            logMessage('üéâ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –£–°–¢–†–ê–ù–ï–ù–´!');
            logMessage('‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
            logMessage('üß™ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é: test-full-features.html');
            clearInterval(window.fixInterval);
        }
        
        async function refreshStatus() {
            checkCount++;
            logMessage(`üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ #${checkCount}...`);
            
            if (currentStep <= 2) {
                updateStep(2, 'running');
                logMessage('üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤...');
            } else if (currentStep <= 3) {
                updateStep(3, 'running');
                logMessage('üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Container App...');
            } else if (currentStep <= 4) {
                updateStep(4, 'running');
                logMessage('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...');
            }
            
            const apiData = await checkAPIStatus();
            
            if (apiData && fixedProblems >= 4) {
                logMessage('üéØ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ.');
                showSuccess();
            }
        }
        
        function clearLogs() {
            document.getElementById('fix-logs').textContent = '–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã...\n';
        }
        
        // Start monitoring
        refreshStatus();
        window.fixInterval = setInterval(refreshStatus, 30000);
        
        // Update timer
        setInterval(() => {
            const elapsed = Math.floor((new Date() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.title = `üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (${minutes}:${seconds.toString().padStart(2, '0')})`;
        }, 1000);
        
        logMessage('üö® –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω');
        logMessage('‚è∞ –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-10 –º–∏–Ω—É—Ç');
    </script>
</body>
</html> 
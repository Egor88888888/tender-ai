<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #ef4444 100%);
            color: white;
            padding: 15px;
            margin: 0;
            min-height: 100vh;
            animation: urgentPulse 3s infinite;
        }
        
        @keyframes urgentPulse {
            0%, 100% { background: linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #ef4444 100%); }
            50% { background: linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #f87171 100%); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .critical-header {
            text-align: center;
            margin-bottom: 20px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }
        
        .critical-header h1 {
            font-size: 3rem;
            margin: 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
        }
        
        .emergency-status {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            backdrop-filter: blur(15px);
        }
        
        .error-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .error-item {
            background: rgba(239, 68, 68, 0.8);
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid #fff;
            animation: errorPulse 2s infinite;
        }
        
        @keyframes errorPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .fix-progress {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .progress-bar {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            height: 40px;
            margin: 15px 0;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #dc2626, #ef4444, #f87171);
            height: 100%;
            border-radius: 15px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: progressPulse 2s infinite;
        }
        
        @keyframes progressPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255,255,255,0.5); }
            50% { box-shadow: 0 0 20px rgba(255,255,255,0.8); }
        }
        
        .action-steps {
            margin: 20px 0;
        }
        
        .step {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            border-left: 5px solid;
        }
        
        .step-critical { 
            background: rgba(239, 68, 68, 0.8); 
            border-left-color: #fff;
            animation: criticalStep 1.5s infinite;
        }
        .step-fixing { 
            background: rgba(251, 191, 36, 0.8); 
            border-left-color: #fff;
            animation: fixingStep 2s infinite;
        }
        .step-completed { 
            background: rgba(16, 185, 129, 0.8); 
            border-left-color: #fff;
        }
        
        @keyframes criticalStep {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes fixingStep {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        
        .step-icon {
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .real-time-logs {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .emergency-buttons {
            text-align: center;
            margin: 25px 0;
        }
        
        .emergency-btn {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(255,255,255,0.5);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            animation: buttonPulse 3s infinite;
        }
        
        @keyframes buttonPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 10px rgba(255,255,255,0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,255,255,0.6); }
        }
        
        .emergency-btn:hover {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
        }
        
        .success-alert {
            background: linear-gradient(135deg, #059669, #10b981);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
            display: none;
            animation: successPulse 2s infinite;
        }
        
        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="critical-header">
            <h1>üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï</h1>
            <p style="font-size: 1.3rem; margin: 10px 0;">–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê</p>
        </div>
        
        <div class="emergency-status">
            <h2 style="color: #fbbf24; margin-bottom: 15px;">‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –û–ë–ù–ê–†–£–ñ–ï–ù–´:</h2>
            <div class="error-list">
                <div class="error-item">
                    <strong>‚ùå Database not configured</strong><br>
                    <small>PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞</small>
                </div>
                <div class="error-item">
                    <strong>‚ùå Computer Vision not configured</strong><br>
                    <small>OCR –∏ –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç</small>
                </div>
                <div class="error-item">
                    <strong>‚ùå AI Analysis Error</strong><br>
                    <small>Gemini AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [object Object]</small>
                </div>
                <div class="error-item">
                    <strong>‚ùå Environment Variables</strong><br>
                    <small>Container App –Ω–µ –ø–æ–ª—É—á–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</small>
                </div>
            </div>
        </div>
        
        <div class="fix-progress">
            <h2>üö® –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="critical-progress" style="width: 5%">5%</div>
            </div>
            
            <div class="action-steps">
                <div class="step step-fixing" id="step1">
                    <span class="step-icon">üîç</span>
                    <span>–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –ü–û–ò–°–ö AZURE –†–ï–°–£–†–°–û–í</span>
                </div>
                <div class="step step-critical" id="step2">
                    <span class="step-icon">üöÄ</span>
                    <span>–°–û–ó–î–ê–ù–ò–ï –ù–ï–î–û–°–¢–ê–Æ–©–ò–• –°–ï–†–í–ò–°–û–í (PostgreSQL, Cognitive)</span>
                </div>
                <div class="step step-critical" id="step3">
                    <span class="step-icon">üîß</span>
                    <span>–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø</span>
                </div>
                <div class="step step-critical" id="step4">
                    <span class="step-icon">üîÑ</span>
                    <span>–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö CONTAINER APP</span>
                </div>
                <div class="step step-critical" id="step5">
                    <span class="step-icon">üß™</span>
                    <span>–ü–†–û–í–ï–†–ö–ê –í–°–ï–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô</span>
                </div>
            </div>
        </div>
        
        <div class="fix-progress">
            <h2>üìã –õ–û–ì–ò –ö–†–ò–¢–ò–ß–ï–°–ö–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø</h2>
            <div class="real-time-logs" id="critical-logs">
üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–ü–£–©–ï–ù–û
–í—Ä–µ–º—è: ${new Date().toLocaleString()}

‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò:
   - Database not configured
   - Computer Vision not configured  
   - AI Analysis [object Object]
   - Container App variables not updated

üö® –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø:
‚úÖ GitHub Actions "üö® FORCE FIX NOW" –∑–∞–ø—É—â–µ–Ω
üîÑ Workflow –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º–µ—Ä–∞–º–∏
‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-8 –º–∏–Ω—É—Ç

üìã –≠–¢–ê–ü–´ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
1. üîç –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ PostgreSQL —Å–µ—Ä–≤–µ—Ä–æ–≤
2. üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ)
3. üß† –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Cognitive Services
4. üîß –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ scaling
6. üß™ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

üö® –ù–ò–ö–ê–ö–ò–• –ö–û–ú–ü–†–û–ú–ò–°–°–û–í - –¢–û–õ–¨–ö–û –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï!
            </div>
        </div>
        
        <div class="emergency-buttons">
            <button class="emergency-btn" onclick="forceRefresh()">üîÑ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï</button>
            <a href="https://github.com/Egor88888888/tender-ai/actions" class="emergency-btn" target="_blank">üëÅÔ∏è –ú–û–ù–ò–¢–û–†–ò–ù–ì GitHub Actions</a>
            <a href="test-full-features.html" class="emergency-btn">üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï</a>
        </div>
        
        <div class="success-alert" id="success-alert">
            <h2>üéâ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!</h2>
            <p>–í–°–ï –û–®–ò–ë–ö–ò –£–°–¢–†–ê–ù–ï–ù–´ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û!</p>
            <a href="test-full-features.html" class="emergency-btn">üöÄ –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨ –ü–û–õ–ù–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ</a>
        </div>
    </div>

    <script>
        const API_BASE = 'https://tender-api.bravesmoke-248b9fb5.westeurope.azurecontainerapps.io';
        let checkCount = 0;
        let startTime = new Date();
        let currentStep = 1;
        let errorsFixed = 0;
        
        function logCritical(message) {
            const logs = document.getElementById('critical-logs');
            const timestamp = new Date().toLocaleTimeString();
            logs.textContent += `\n[${timestamp}] ${message}`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        function updateCriticalProgress(percentage) {
            document.getElementById('critical-progress').style.width = percentage + '%';
            document.getElementById('critical-progress').textContent = percentage + '%';
        }
        
        function updateCriticalStep(stepNumber, status) {
            const step = document.getElementById(`step${stepNumber}`);
            step.className = `step step-${status}`;
            
            if (status === 'fixing') {
                currentStep = stepNumber;
            }
        }
        
        async function checkCriticalStatus() {
            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                
                let progress = 15; // Base progress
                errorsFixed = 0;
                
                // Check critical fixes
                if (data.features.database) {
                    errorsFixed++;
                    progress += 25;
                    logCritical('üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!');
                }
                
                if (data.features.computer_vision) {
                    errorsFixed++;
                    progress += 25;
                    logCritical('üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Computer Vision –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
                }
                
                if (data.features.gemini_ai) {
                    errorsFixed++;
                    progress += 20;
                    logCritical('üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Gemini AI –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
                }
                
                if (data.features.blob_storage) {
                    errorsFixed++;
                    progress += 15;
                    logCritical('üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Storage –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
                }
                
                updateCriticalProgress(progress);
                
                // Update steps based on progress
                if (progress >= 15) updateCriticalStep(1, 'completed');
                if (progress >= 30) updateCriticalStep(2, 'completed');
                if (progress >= 50) updateCriticalStep(3, 'completed');
                if (progress >= 75) updateCriticalStep(4, 'completed');
                if (progress >= 100) {
                    updateCriticalStep(5, 'completed');
                    showCriticalSuccess();
                }
                
                return data;
                
            } catch (error) {
                logCritical(`üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}`);
                return null;
            }
        }
        
        function showCriticalSuccess() {
            document.getElementById('success-alert').style.display = 'block';
            document.body.style.animation = 'none';
            document.body.style.background = 'linear-gradient(135deg, #059669, #10b981)';
            logCritical('üéâ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –£–°–¢–†–ê–ù–ï–ù–´!');
            logCritical('‚úÖ –ü–û–õ–ù–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û!');
            logCritical('üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø–æ–ª–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!');
            clearInterval(window.criticalInterval);
        }
        
        async function forceRefresh() {
            checkCount++;
            logCritical(`üîç –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê #${checkCount}...`);
            
            if (currentStep <= 2) {
                updateCriticalStep(2, 'fixing');
                logCritical('üöÄ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –°–û–ó–î–ê–ù–ò–ï –†–ï–°–£–†–°–û–í...');
            } else if (currentStep <= 3) {
                updateCriticalStep(3, 'fixing');
                logCritical('üîß –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–•...');
            } else if (currentStep <= 4) {
                updateCriticalStep(4, 'fixing');
                logCritical('üîÑ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö CONTAINER APP...');
            } else if (currentStep <= 5) {
                updateCriticalStep(5, 'fixing');
                logCritical('üß™ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô...');
            }
            
            const apiData = await checkCriticalStatus();
            
            if (apiData && errorsFixed >= 4) {
                logCritical('üéØ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –£–°–¢–†–ê–ù–ï–ù–´ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û!');
                showCriticalSuccess();
            }
        }
        
        // Start critical monitoring
        forceRefresh();
        window.criticalInterval = setInterval(forceRefresh, 20000); // Check every 20 seconds
        
        // Update timer
        setInterval(() => {
            const elapsed = Math.floor((new Date() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.title = `üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (${minutes}:${seconds.toString().padStart(2, '0')})`;
        }, 1000);
        
        logCritical('üö® –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω');
        logCritical('‚è∞ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 5-8 –º–∏–Ω—É—Ç');
        logCritical('üéØ –¶–µ–ª—å: 100% –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞');
    </script>
</body>
</html> 